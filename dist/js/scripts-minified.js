let pokemonRepository=function(){let e=[];function t(t){e.push(t)}function l(){return e}function n(e){i(e).then(function(){modalIIFE.showModal(e)})}function i(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types}).catch(function(e){console.error(e)})}function a(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.types=t.types}).catch(function(e){console.error(e)})}return{add:t,getAll:l,addListItem:function e(t){let l=document.querySelector(".pokemon-list"),i=document.createElement("li"),o=document.createElement("button");o.innerText=t.name,document.querySelector(".pokemon-list"),l.appendChild(i),i.classList.add("list-group-item"),l.lastElementChild.appendChild(o);let s=l.lastElementChild.querySelector("button");s.classList.add("btn-block"),s.classList.add("btn-primary"),s.setAttribute("data-toggle","modal"),s.setAttribute("data-target","#exampleModal"),s.parentElement.classList.add("col-xl-3"),s.parentElement.classList.add("col-lg-4"),s.parentElement.classList.add("col-md-6");let r={bug_grass:"grassBug",bug_poison:"bugPoison",electric_steel:"electricSteel",fairy_normal:"normalFairy",fairy_psychic:"psychicFairy",fighting_water:"waterFighting",ghost_poison:"poisonGhost",grass_poison:"grassPoison",grass_psychic:"psychicGrass",ground_poison:"poisonGround",ground_rock:"groundRock",ice_psychic:"psychicIce",ice_water:"iceWater",poison_water:"poisonWater",psychic_water:"psychicWater",rock_water:"rockWater",fire_flying:"fire",bug_flying:"bug",flying_normal:"normal",flying_poison:"poison",flying_water:"water",flying_rock:"rock",flying_ice:"ice",electric_flying:"electric",dragon_flying:"dragon"};a(t).then(function(){let e=t.types,l=t.types.map(e=>e.type.name);e.forEach(function(t){let n=t.type.name;1===e.length?s.classList.add(n):2===e.length&&(newClassName=r[l.sort().join("_")],s.classList.add(newClassName))})}),s.addEventListener("click",function(){s.parentElement.classList.add("modal-container"),n(t)})},showDetails:n,loadList:function e(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){t({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:i,loadTypes:a,searchPokemon:function e(){let t=document.querySelector(".search-input"),l=document.querySelector(".pokemon-list").getElementsByTagName("li");for(let n=0;n<l.length;n++)l[n].classList.remove("hide");for(let i=0;i<l.length;i++)""===t.value||l[i].innerText.indexOf(t.value)&&l[i].classList.add("hide")}}}(),modalIIFE=function(){function e(){let e=document.querySelector(".modal-container");document.querySelector(".is-visible").classList.remove("is-visible");document.getElementById("exampleModal").removeAttribute("id"),e.classList.remove("modal-container")}return{showModal:function t(l){let n=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div"),s=document.createElement("h1"),r=document.createElement("img"),d=document.createElement("p"),c=document.createElement("button"),m=document.querySelector(".modal-container");if(m.lastElementChild.classList.contains("modal")){let u=m.querySelector(".modal");u.setAttribute("id","exampleModal");let p=m.querySelector(".btn-block");u.classList.contains("is-visible")||(p.click(),u.classList.add("is-visible"))}else{m.appendChild(n),m.lastElementChild.classList.add("modal");let h=m.querySelector(".modal");h.setAttribute("tabindex","-1"),h.setAttribute("role","dialog"),h.setAttribute("id","exampleModal"),h.appendChild(i),h.lastElementChild.classList.add("modal-dialog");let y=h.querySelector(".modal-dialog");y.setAttribute("role","document"),y.appendChild(a),y.lastElementChild.classList.add("modal-content");let g=y.querySelector(".modal-content");g.appendChild(o),g.lastElementChild.classList.add("modal-header");let f=g.querySelector(".modal-header");f.appendChild(s),f.classList.add("modal-title"),f.lastElementChild.innerText="Name: "+l.name,f.appendChild(c),f.lastElementChild.setAttribute("type","button"),f.lastElementChild.classList.add("close"),f.lastElementChild.setAttribute("data-dismiss","modal"),f.lastElementChild.setAttribute("aria-label","Close"),f.lastElementChild.innerHTML='<span aria-hidden="true">&times;</span>',f.lastElementChild.innerText="Close",f.lastElementChild.addEventListener("click",e),g.appendChild(d),d.classList.add("modal-content"),g.lastElementChild.innerText="Height: "+l.height,r.src=l.imageUrl,g.appendChild(r),r.classList.add("modal-content"),r.setAttribute("id","modal-image"),h.classList.add("is-visible");let E=document.querySelector(".is-visible");E.addEventListener("click",t=>{t.target===E&&e()});m.querySelector(".btn-block").click()}},hideModal:e}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})}),window.addEventListener("keydown",e=>{"Escape"===e.key&&document.querySelector(".is-visible")&&modalIIFE.hideModal()});let searchButton=document.querySelector(".submit-button");searchButton.addEventListener("click",e=>{e.preventDefault(),pokemonRepository.searchPokemon()}),searchButton.addEventListener("keydown",e=>{"Enter"===document.querySelector(".search-input").key&&(e.preventDefault(),pokemonRepository.searchPokemon())});